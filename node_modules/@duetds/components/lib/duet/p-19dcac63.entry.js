/*!
 * Built with Duet Design System
 */
import{r as t,c as e,h as i,H as s,g as o}from"./p-e2a64fc4.js";import{i as r}from"./p-4ebf1618.js";import{c as l}from"./p-c1325e35.js";import{f as a,o as h,j as n,d as u,b as d,a as c,c as m}from"./p-f077c646.js";import{g as p,c as b,d as g}from"./p-076452be.js";import{p as v}from"./p-5a9d75e1.js";const x=class{constructor(i){t(this,i),this.duetChange=e(this,"duetChange",3),this.duetFocus=e(this,"duetFocus",7),this.duetBlur=e(this,"duetBlur",7),this.errorId=l("DuetError"),this.labelId=l("DuetLabel"),this.topCaptionId=l("DuetCaptionTop"),this.selectedLangObject={en:"selected",fi:"valittu",sv:"vald"},this.onChange=t=>{this.duetChange.emit({originalEvent:t,value:this.value,component:"duet-multiselect"})},this.onBlur=t=>{this.duetBlur.emit({originalEvent:t,value:this.value,component:"duet-multiselect"})},this.onFocus=t=>{this.duetFocus.emit({originalEvent:t,value:this.value,component:"duet-multiselect"})},this.onMultiselectKeyDown=t=>{(a(t)||h(t))&&this.checkboxesVisible&&(this.checkboxesVisible=!1,this.multiselectElement.focus(),t.preventDefault())},this.onMultiselectInputKeyDown=t=>{n(t)&&(t.preventDefault(),this.toggleCheckboxes(),setTimeout((()=>{if(this.checkboxesVisible){const t=this.element.shadowRoot.querySelector(`#${this.getOptionIdentifier(0)}`);t&&t.focus()}}),200))},this.onCheckboxKeyDown=(t,e)=>{let i;u(t)||d(t)?i=this.element.shadowRoot.querySelector(`#${this.getOptionIdentifier(e-1)}`):(c(t)||m(t))&&(i=this.element.shadowRoot.querySelector(`#${this.getOptionIdentifier(e+1)}`)),i&&(i.focus(),t.preventDefault(),this.activeDescendant=i.id)},this.toggleCheckboxes=()=>{this.checkboxesVisible=!this.checkboxesVisible},this.toggleCheckbox=(t,e)=>{this.value=function(t,e){return t.includes(e)?t.filter((t=>t!==e)):[...t,e]}(this.value,e),this.onChange(t)},this.getOptionIdentifier=t=>`${this.identifier}-option-${t}`,this.getDescribedBy=()=>{const t=[];return this.isCaptionVisible&&this.topCaptionId&&t.push(this.topCaptionId),this.accessibleDescribedBy&&t.push(this.accessibleDescribedBy),this.error&&t.push(this.errorId),t.length>0?t.join(" "):null},this.processedItems=[],this.checkboxesVisible=!1,this.activeDescendant="",this.language=p(),this.margin="auto",this.error="",this.accessibleLiveError="polite",this.expand=!1,this.value=[],this.theme="",this.labelHidden=!1,this.identifier=l("DuetMultiselect"),this.placeholder="",this.caption=void 0,this.items=void 0,this.disabled=!1,this.label="label",this.accessibleDescribedBy=void 0,this.tooltip="",this.tooltipDirection="auto"}handleFocus(t){t.composedPath().every((t=>t!==this.element))&&(this.checkboxesVisible=!1)}componentWillLoad(){r(this),this.isCaptionVisible=!!this.caption,this.refresh()}connectedCallback(){b(this)}disconnectedCallback(){g(this)}async setFocus(t){this.multiselectElement&&this.multiselectElement.focus(t)}async refresh(){this.processedItems=v(this.items)}render(){return i(s,{class:{"duet-m-0":"none"===this.margin,"duet-expand":this.expand}},i("div",{class:{"duet-multiselect-container":!0,"duet-label-hidden":this.labelHidden,"duet-theme-turva":"turva"===this.theme,"duet-input-top-caption-shown":this.isCaptionVisible,"has-error":!!this.error},onKeyDown:t=>this.onMultiselectKeyDown(t)},i("duet-label",{theme:"turva"===this.theme?"turva":"default",class:{"duet-has-tooltip":!!this.tooltip},id:this.labelId,for:this.identifier},this.label),this.tooltip&&i("duet-tooltip",{class:"duet-multiselect-tooltip",direction:this.tooltipDirection,accessibleInputLabel:this.label},this.tooltip),this.caption&&i("duet-caption",{id:this.topCaptionId,size:"medium"},this.caption),i("div",{class:"duet-multiselect-wrapper"},i("button",{id:this.identifier,ref:t=>this.multiselectElement=t,class:{"duet-multiselect":!0,"duet-multiselect-active":this.checkboxesVisible},tabindex:"0",onClick:()=>this.toggleCheckboxes(),onFocus:t=>this.onFocus(t),onBlur:t=>this.onBlur(t),role:"combobox","aria-expanded":this.checkboxesVisible?"true":"false","aria-haspopup":"listbox","aria-labelledby":this.labelId,"aria-describedby":this.getDescribedBy(),"aria-owns":`${this.identifier}-checkboxes`,onKeyDown:t=>this.onMultiselectInputKeyDown(t),disabled:this.disabled},i("span",{role:"textbox","aria-readonly":"true","aria-multiline":"false","aria-autocomplete":"none","aria-controls":`${this.identifier}-checkboxes`},this.placeholder),this.value&&this.value.length>0&&i("duet-badge",{class:"duet-multiselect-badge",margin:"none",theme:this.theme},this.value.length," ",this.selectedLangObject[this.language],i("duet-visually-hidden",null,", ",this.value.map((t=>t.label)).join(", "))),i("svg",{role:"img",class:{"duet-multiselect-icon":!0,"duet-multiselect-icon--rotate":this.checkboxesVisible},fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"m12 18.999c-.4 0-.776-.156-1.059-.438l-10.721-10.72c-.142-.142-.22-.33-.22-.531 0-.2.078-.389.22-.53.142-.142.33-.22.53-.22s.389.078.53.22l10.72 10.719 10.72-10.719c.142-.142.33-.22.53-.22s.389.078.53.22c.142.142.22.33.22.53s-.078.389-.22.53l-10.72 10.72c-.282.283-.659.439-1.06.439z"}))),i("div",{id:`${this.identifier}-checkboxes`,role:"listbox",class:{"duet-multiselect-checkboxes":!0,"duet-multiselect-checkboxes-active":this.checkboxesVisible},"aria-activedescendant":this.activeDescendant,"aria-multiselectable":"true"},this.processedItems&&this.processedItems.map(((t,e)=>{var s,o;return i("duet-checkbox",{identifier:this.getOptionIdentifier(e),role:"option",label:t.label,value:t.value,key:t.value,checked:null===(s=this.value)||void 0===s?void 0:s.includes(t),"accessible-selected":(null===(o=this.value)||void 0===o?void 0:o.includes(t))?"true":void 0,disabled:!this.checkboxesVisible||t.disabled,onDuetChange:e=>this.toggleCheckbox(e,t),onKeyDown:t=>this.onCheckboxKeyDown(t,e),theme:this.theme})})))),i("span",{class:"duet-multiselect-help",id:this.errorId,"aria-atomic":"true","aria-live":this.accessibleLiveError,"aria-relevant":"additions removals"},this.error&&i("span",null,this.error))))}get element(){return o(this)}static get watchers(){return{items:["refresh"]}}};x.style='*,*::after,*::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}:host{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;margin-right:16px !important;margin-bottom:12px !important;display:inline-flex;width:100%;max-width:100%;vertical-align:bottom}:host:last-child,:host:last-of-type{margin-right:0 !important}@media (min-width: 36em){:host{width:calc(50% - 16px - 3px)}:host.duet-expand{width:100% !important}}:host(.duet-m-0){margin:0 !important}.duet-multiselect-tooltip{position:absolute;top:12px;right:0}@media (min-width: 48em){.duet-multiselect-tooltip{position:relative;top:4px;right:auto}}.duet-multiselect-placeholder{position:absolute;top:-9px;left:9px;z-index:200;display:block;width:auto;max-width:60%;padding:0 0.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background:rgb(255, 255, 255)}.duet-multiselect-container{position:relative;width:100%}.duet-multiselect-wrapper{position:relative;width:100%;font-family:"localtapiola-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:1rem;font-weight:400;line-height:1.25}.duet-theme-turva .duet-multiselect-wrapper{font-family:"turva-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}.duet-multiselect{display:flex;gap:12px;align-items:center;justify-content:flex-start;width:100%;min-width:8rem;padding:12px 14px !important;overflow:hidden;font-family:"localtapiola-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:1rem;font-weight:400;font-variant-numeric:tabular-nums;line-height:1.5;color:rgb(0, 41, 77);text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;background:rgb(255, 255, 255);border:1px solid rgb(144, 149, 153);border-radius:4px;transition:150ms ease}.duet-multiselect:hover{border-color:rgb(144, 149, 153);box-shadow:0 0 0 1px rgb(144, 149, 153)}.duet-theme-turva .duet-multiselect:hover{border-color:rgb(116, 116, 117);box-shadow:0 0 0 1px rgb(116, 116, 117)}.has-error .duet-multiselect:hover{box-shadow:0 0 0 1px rgb(222, 35, 98)}.duet-theme-turva.has-error .duet-multiselect:hover{box-shadow:0 0 0 1px rgb(224, 42, 13)}.duet-multiselect:focus,.duet-multiselect.duet-multiselect-active{border-color:rgb(0, 119, 179);outline:0;box-shadow:0 0 0 1px rgb(0, 119, 179);transition:none}.duet-theme-turva .duet-multiselect:focus,.duet-theme-turva .duet-multiselect.duet-multiselect-active{border-color:rgb(23, 28, 58);box-shadow:0 0 0 1px rgb(23, 28, 58)}.has-error .duet-multiselect:focus,.has-error .duet-multiselect.duet-multiselect-active{box-shadow:0 0 0 1px rgb(222, 35, 98)}.duet-theme-turva.has-error .duet-multiselect:focus,.duet-theme-turva.has-error .duet-multiselect.duet-multiselect-active{box-shadow:0 0 0 1px rgb(224, 42, 13)}.duet-multiselect[disabled]{color:rgb(0, 41, 77) !important;cursor:default !important;background:rgb(245, 248, 250) !important;border-color:rgb(245, 248, 250) !important;box-shadow:none !important;opacity:1 !important;-webkit-text-fill-color:rgb(0, 41, 77) !important}.duet-theme-turva .duet-multiselect[disabled]{color:rgb(23, 28, 58) !important;background:rgb(245, 245, 247) !important;border-color:rgb(245, 245, 247) !important;-webkit-text-fill-color:rgb(23, 28, 58) !important}.duet-multiselect>:first-child{flex:1}.duet-multiselect .duet-multiselect-badge{position:absolute;right:3rem}.has-error .duet-multiselect{border-color:rgb(222, 35, 98) !important}.has-error .duet-multiselect .duet-multiselect-icon{color:rgb(222, 35, 98) !important}.duet-theme-turva.has-error .duet-multiselect{border-color:rgb(224, 42, 13) !important}.duet-theme-turva.has-error .duet-multiselect .duet-multiselect-icon{color:rgb(224, 42, 13) !important}.duet-theme-turva .duet-multiselect{font-family:"turva-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";color:rgb(23, 28, 58);border-color:rgb(116, 116, 117)}.duet-multiselect svg{width:20px;height:20px;color:rgb(0, 41, 77);pointer-events:none}.duet-theme-turva .duet-multiselect svg{color:rgb(23, 28, 58)}.duet-multiselect svg.duet-multiselect-icon--rotate{transform:rotate(180deg)}.duet-multiselect-checkboxes{position:absolute;z-index:700;width:100%;padding:16px;margin:8px 0 0;visibility:hidden;background:rgb(255, 255, 255);border:1px solid rgb(225, 227, 230);border-radius:4px;box-shadow:0 4px 10px 0 rgba(0, 41, 77, 0.15);opacity:0;transition:transform 300ms ease, opacity 300ms ease, visibility 300ms ease;transform:scale(0.96) translateZ(0) translateY(-20px);transform-origin:top right}.duet-theme-turva .duet-multiselect-checkboxes{background:rgb(255, 255, 255);border-color:rgb(228, 228, 230);box-shadow:0 4px 10px 0 rgba(23, 28, 58, 0.15)}.duet-multiselect-checkboxes.duet-multiselect-checkboxes-active{visibility:visible;opacity:1;transition-property:transform, opacity;transform:scale(1.0001) translateZ(0) translateY(0)}.duet-multiselect-help{display:block;font-family:"localtapiola-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";font-size:0.875rem;font-weight:400;line-height:1.25;color:rgb(101, 119, 135);border-radius:4px}.duet-multiselect-help span{display:block;margin-top:8px}.duet-theme-turva .duet-multiselect-help{font-family:"turva-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";color:rgb(116, 116, 117)}.has-error .duet-multiselect-help{color:rgb(222, 35, 98)}.duet-theme-turva.has-error .duet-multiselect-help{color:rgb(224, 42, 13)}.duet-label-hidden duet-label{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);border:0}';export{x as duet_multiselect}