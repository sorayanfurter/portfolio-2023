var __awaiter=this&&this.__awaiter||function(t,e,o,i){function s(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,c){function n(t){try{r(i.next(t))}catch(e){c(e)}}function u(t){try{r(i["throw"](t))}catch(e){c(e)}}function r(t){t.done?o(t.value):s(t.value).then(n,u)}r((i=i.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var o={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,s,c,n;return n={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(n[Symbol.iterator]=function(){return this}),n;function u(t){return function(e){return r([t,e])}}function r(u){if(i)throw new TypeError("Generator is already executing.");while(n&&(n=0,u[0]&&(o=0)),o)try{if(i=1,s&&(c=u[0]&2?s["return"]:u[0]?s["throw"]||((c=s["return"])&&c.call(s),0):s.next)&&!(c=c.call(s,u[1])).done)return c;if(s=0,c)u=[u[0]&2,c.value];switch(u[0]){case 0:case 1:c=u;break;case 4:o.label++;return{value:u[1],done:false};case 5:o.label++;s=u[1];u=[0];continue;case 7:u=o.ops.pop();o.trys.pop();continue;default:if(!(c=o.trys,c=c.length>0&&c[c.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!c||u[1]>c[0]&&u[1]<c[3])){o.label=u[1];break}if(u[0]===6&&o.label<c[1]){o.label=c[1];c=u;break}if(c&&o.label<c[2]){o.label=c[2];o.ops.push(u);break}if(c[2])o.ops.pop();o.trys.pop();continue}u=e.call(t,o)}catch(r){u=[6,r];s=0}finally{i=c=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};
/*!
 * Built with Duet Design System
 */System.register(["./p-fbef8044.system.js","./p-33b3aba4.system.js","./p-34ea0849.system.js","./p-51721695.system.js","./p-c8dc599d.system.js","./p-b6d51921.system.js"],(function(t){"use strict";var e,o,i,s,c,n,u,r,l,b,a,d,m,h,p,x,f,v;return{setters:[function(t){e=t.h;o=t.F;i=t.r;s=t.c;c=t.H;n=t.g},function(t){u=t.i},function(t){r=t.d},function(t){l=t.j;b=t.f;a=t.o;d=t.b;m=t.c},function(t){h=t.g;p=t.a;x=t.c;f=t.d},function(t){v=t.p}],execute:function(){var g=function(t){var i=t.item,s=t.search,c=s===void 0?"":s,n=t.selected;var u=c!==""?new RegExp("("+c.split(" ").join("|")+")","gi"):undefined;return e(o,null,n&&e("duet-icon",{class:"option-icon",name:"messaging-checked",size:"xx-small",margin:"none"}),u?e("span",{class:"option-container","aria-hidden":"true"},e("span",{innerHTML:i.name.replace(u,'<span class="highlight">$&</span>')})):i.name,i.tags&&e("span",{class:"option-tags"},i.tags.join(", ")))};var I=function(t){var o=t.item,i=t.active,s=t.total,c=t.selected,n=t.label,u=n===void 0?undefined:n,r=t.clickHandler,l=r===void 0?function(t){t.preventDefault()}:r,b=t.keyHandler,a=b===void 0?function(t){t.preventDefault()}:b,d=t.search;return e("li",{class:{"list-item":true,option:true,active:i,selected:c},id:i?"active_item":"","data-index":o.id,"aria-selected":i?"true":undefined,"aria-current":c?"true":undefined,role:"option","aria-label":u||"".concat(o.name,", (").concat(o.id+1," of ").concat(s,")")},e("a",{tabindex:"-1",onClick:function(t){return l(t)},onKeyUp:function(t){return a(t)},class:"option-link","aria-label":u||"".concat(o.name,", (").concat(o.id+1," of ").concat(s,")"),"aria-hidden":"true"},e(g,{item:o,search:d,selected:c})))};var y='.sc-duet-combobox-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;position:relative;display:inline-block;width:100%;font-family:"localtapiola-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";color:rgb(0, 41, 77)}.sc-duet-combobox-h a.sc-duet-combobox{color:rgb(0, 41, 77);transition:none}.duet-theme-turva.sc-duet-combobox-h{font-family:"turva-sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";color:rgb(23, 28, 58)}.duet-theme-turva.sc-duet-combobox-h a.sc-duet-combobox{color:rgb(23, 28, 58)}.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.option.sc-duet-combobox .option-tags.sc-duet-combobox{color:rgb(116, 116, 117)}.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.option.selected.sc-duet-combobox{background:rgb(244, 207, 214)}.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.active.sc-duet-combobox,.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:focus,.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:hover{color:rgb(255, 255, 255);background:rgb(198, 12, 48)}.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.active.sc-duet-combobox .option-tags.sc-duet-combobox,.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:focus .option-tags.sc-duet-combobox,.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:hover .option-tags.sc-duet-combobox{color:rgb(255, 255, 255)}.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.active.sc-duet-combobox a.sc-duet-combobox,.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:focus a.sc-duet-combobox,.duet-theme-turva.sc-duet-combobox-h .duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:hover a.sc-duet-combobox{color:rgb(255, 255, 255)}.duet-combobox-list.sc-duet-combobox{position:absolute;top:calc(100% - 12px);height:0;overflow:hidden;background:rgb(255, 255, 255);border-radius:0 4px;box-shadow:0 2px 10px 0 rgba(0, 41, 77, 0.1);opacity:0}.duet-combobox-list.open.sc-duet-combobox{z-index:700;display:block;height:auto;opacity:1}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox{max-height:200px;padding:0.75rem 0;margin:0;overflow-y:scroll;font-weight:600;list-style:none;cursor:pointer;scroll-behavior:smooth}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox{padding:4px 0}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:not(.selected){padding-left:16px}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:not(.selected) .highlight.sc-duet-combobox{text-decoration:underline}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.option.sc-duet-combobox .option-link.sc-duet-combobox{display:block;width:100%}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.option.sc-duet-combobox .option-tags.sc-duet-combobox{float:right;padding-right:0.875rem;font-weight:400;color:rgb(144, 149, 153)}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.option-link.sc-duet-combobox{display:block;width:100%}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.selected.sc-duet-combobox{padding-left:0;background:rgb(205, 229, 241)}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.selected.option.sc-duet-combobox .option-icon.sc-duet-combobox{padding:0 8px 0 8px}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.selected.option.sc-duet-combobox .option-tags.sc-duet-combobox{color:rgb(144, 149, 153)}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.active.sc-duet-combobox,.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:focus,.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:hover{color:rgb(255, 255, 255);background:rgb(0, 119, 179)}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.active.sc-duet-combobox .option-tags.sc-duet-combobox,.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:focus .option-tags.sc-duet-combobox,.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:hover .option-tags.sc-duet-combobox{color:rgb(255, 255, 255)}.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.active.sc-duet-combobox a.sc-duet-combobox,.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:focus a.sc-duet-combobox,.duet-combobox-list.sc-duet-combobox .duet-combobox-listbox.sc-duet-combobox .list-item.sc-duet-combobox:hover a.sc-duet-combobox{color:rgb(255, 255, 255)}';var w=t("duet_combobox",function(){function t(t){var e=this;i(this,t);this.duetChange=s(this,"duetChange",3);this.resizeObserver=new ResizeObserver(r((function(t){var o,i;if((t===null||t===void 0?void 0:t.length)===1){var s=(i=(o=t[0])===null||o===void 0?void 0:o.target)===null||i===void 0?void 0:i.getBoundingClientRect().width;e.listContainer.style.width="".concat(s+1,"px")}}),100));this.processedItems=null;this.inputWidth=0;this.inputValue="";this.selectionMsg="";this.listOpen=false;this.selectedItems=new Set;this.activeItem=undefined;this.language=h();this.accessibleLabelDefaults={en:{heading:"Select:",item:"{name}, ({current} of {total})",itemFiltered:"{name}, ({current} of {total}, {hiddenItems} filtered)"},fi:{heading:"Valitse:",item:"{name}, ({current}/{total})",itemFiltered:"{name}, ({current}/{total}, {hiddenItems} suodatettu)"},sv:{heading:"Välj:",item:"{name}, ({current} av {total})",itemFiltered:"{name}, ({current} av {total}, {hiddenItems} filtrerade)"}};this.accessibleLabels=p(v(this.accessibleLabelDefaults),h());this.theme="";this.force=false;this.items=undefined;this.formatter=function(t){return t&&t.name?t.name:""};this.value=undefined;this.minCharacters=1;this.openListOnClick=false;this.filterType="startsWith"}t.prototype.activeItemHandler=function(t){this.input.accessibleActiveDescendant=this.listOpen&&(t||t===0)?"active_item":""};t.prototype.watchLanguageStateHandler=function(t,e){if(t!==e&&this.accessibleLabels===p(v(this.accessibleLabelDefaults),e)){this.accessibleLabels=p(v(this.accessibleLabelDefaults),t)}};t.prototype.handleDocumentClick=function(t){var e=this;var o=t.composedPath();var i=o.every((function(t){return t!==e.element}));if(i){this.updateInputText(true);this.listOpen=false}};t.prototype.formatItem=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.formatter(t)]}))}))};t.prototype.processItems=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:this.items=this.processedItems=v(this.items);return[4,this.updateInputText()];case 1:t.sent();return[2]}}))}))};t.prototype.processValue=function(){return __awaiter(this,void 0,void 0,(function(){var t;var e=this;return __generator(this,(function(o){if(this.value){t=this.items.find((function(t){return t.value===e.value}));this.updateSelectedItems(t.id)}return[2]}))}))};t.prototype.componentWillLoad=function(){u(this)};t.prototype.connectedCallback=function(){var t=this;this.items=this.processedItems=v(this.items);this.input=this.element.querySelector("duet-input");this.input.addEventListener("duetChange",this.updateInputValue.bind(this));this.input.addEventListener("click",(function(){if(!t.openListOnClick){t.inputValue.length>=t.minCharacters?t.listOpen=true:t.listOpen=false}else{t.listOpen=!t.listOpen}}));this.element.addEventListener("keydown",this.handleInputKeyDownEvent.bind(this));x(this);this.input.accessibleAutocomplete="list";this.input.accessibleControls="duet-combobox-list-element"};t.prototype.disconnectedCallback=function(){var t=this;this.input.removeEventListener("duetChange",this.updateInputValue.bind(this));this.input.removeEventListener("click",(function(){return t.inputValue.length?t.listOpen=true:t.listOpen=false}));this.element.removeEventListener("keydown",this.handleInputKeyDownEvent.bind(this));this.listElement.removeEventListener("click",(function(t){t.stopPropagation()}));this.resizeObserver.disconnect();f(this)};t.prototype.componentDidLoad=function(){this.resizeObserver.observe(this.input);this.listElement.addEventListener("click",(function(t){t.stopPropagation()}));this.processValue()};t.prototype.onListClick=function(t,e){t.preventDefault();this.updateSelectedItems(e.id,true);this.listOpen=false;return this.listOpen};t.prototype.shouldListBeFiltered=function(){var t=this;if(this.selectedItems.size&&this.input.value===this.inputValue){var e=this.items.filter((function(e){return t.selectedItems.has(e.id)}));return!(this.formatter(e).toLowerCase()===this.input.value.toLowerCase())}return true};t.prototype.returnFilteredOrNonFiltered=function(){return this.processedItems?this.shouldListBeFiltered()?this.getFilteredItems():this.sortFilteredItems(this.processedItems):[]};t.prototype.updateSelectedItems=function(t,e){return __awaiter(this,void 0,void 0,(function(){var o;var i=this;return __generator(this,(function(s){switch(s.label){case 0:this.selectedItems.clear();if(this.selectedItems){if(this.selectedItems.has(t)){this.selectedItems.delete(t)}else{this.selectedItems.add(t)}}if(e){o=this.selectedItems.size===0?[]:this.items.filter((function(t){return i.selectedItems.has(t.id)}));this.duetChange.emit({value:o[0].value,item:o[0],component:"duet-combobox"})}return[4,this.updateInputText()];case 1:s.sent();return[2]}}))}))};t.prototype.updateInputText=function(t){if(t===void 0){t=false}return __awaiter(this,void 0,void 0,(function(){var e,o;var i=this;return __generator(this,(function(s){switch(s.label){case 0:e=this.selectedItems.size===0?[]:this.items.filter((function(t){return i.selectedItems.has(t.id)}));if(e.length===0&&this.selectedItems.size>0){this.selectedItems.clear();this.input.value="";this.value=undefined;this.activeItem=undefined}if(!(this.selectedItems.size===1))return[3,2];this.input.value="";o=this.input;return[4,this.formatItem(e[0])];case 1:o.value=s.sent();this.input.scrollLeft=this.input.scrollWidth;this.activeItem=undefined;this.value=e[0].value;s.label=2;case 2:if(t&&this.selectedItems.size===0){if(this.force){this.inputValue="";this.input.value=""}this.activeItem=undefined}this.listOpen=false;return[2]}}))}))};t.prototype.updateInputValue=function(t){var e;this.inputValue=t.detail.value;this.listOpen=String(this.inputValue).length>=this.minCharacters&&((e=this.getFilteredItems())===null||e===void 0?void 0:e.length)>0};t.prototype.handleInputKeyDownEvent=function(t){this.input.accessibleActiveDescendant=undefined;if(l(t)){t.preventDefault();this.selectActiveItem();this.updateInputText(false);this.listOpen=false;return}if(b(t)||a(t)){this.updateInputText(true);this.listOpen=false;return}var e=this.activeItem;if(d(t)){t.preventDefault();e=this.activeItem-1}else if(m(t)){t.preventDefault();e=this.listOpen?this.activeItem+1:this.activeItem;this.listOpen=true}if(m(t)||d(t)){var o=this.shouldListBeFiltered()?this.getFilteredItems():this.processedItems;if(e<0||!e){e=0}if(e>=o.length){e=o.length-1}this.input.accessibleActiveDescendant="active_item";this.activeItem=e;this.scrollToActive()}this.announceActive();return};t.prototype.selectActiveItem=function(){if(this.activeItem===undefined){return}var t=this.returnFilteredOrNonFiltered();var e=t[this.activeItem];this.updateSelectedItems(e.id,true)};t.prototype.announceActive=function(t){if(!t){t=this.returnFilteredOrNonFiltered()}if(this.activeItem===undefined||this.activeItem===-1){return}var e=t[this.activeItem];this.selectionMsg=structuredClone(this.formatLabel(e,t.length,this.items.length))};t.prototype.scrollToActive=function(){var t=this.listElement.querySelector(".active");if(t){t.scrollIntoView({behavior:"smooth",block:"center"})}};t.prototype.formatLabel=function(t,e,o){if(!t||o===undefined){return""}var i=e===o?this.accessibleLabels.item:this.accessibleLabels.itemFiltered;return i.replace("{name}",String(t.name)).replace("{current}",String(this.activeItem+1)).replace("{total}",String(e)).replace("{hiddenItems}",String(o-e))};t.prototype.getFilteredItems=function(){var t=this;var e=this.processedItems.filter((function(e){var o,i,s,c;return((o=String(e.value))===null||o===void 0?void 0:o.toLowerCase()[t.filterType]((i=t.inputValue)===null||i===void 0?void 0:i.toLowerCase()))||((s=String(e.name))===null||s===void 0?void 0:s.toLowerCase()[t.filterType]((c=t.inputValue)===null||c===void 0?void 0:c.toLowerCase()))||t.selectedItems.has(e.id)}));return this.sortFilteredItems(e)};t.prototype.sortFilteredItems=function(t){var e=this;if(t.length>0){t.filter((function(t){return e.selectedItems.has(t.id)})).forEach((function(e){var o=t.indexOf(e);t.splice(o,1);t.unshift(e)}))}return t};t.prototype.render=function(){var t;var o=this;var i=this.returnFilteredOrNonFiltered();return e(c,{role:"combobox","aria-expanded":this.listOpen?"true":"false","aria-owns":"duet-combobox-list-element","aria-haspopup":"listbox",class:(t={"duet-combobox":true},t["duet-theme-".concat(this.theme)]=true,t)},e("slot",null),e("div",{role:"list",class:{"duet-combobox-list":true,open:this.listOpen},ref:function(t){return o.listContainer=t}},e("ul",{class:{"duet-combobox-listbox-open":this.listOpen,"duet-combobox-listbox":true},role:"listbox",ref:function(t){return o.listElement=t},id:"duet-combobox-list-element"},i.map((function(t,s){return e(I,{item:t,active:s===o.activeItem,selected:o.selectedItems.has(t.id),search:o.inputValue,total:i.length,clickHandler:function(e){return o.onListClick(e,t)},label:o.formatLabel(t,i.length,o.items.length)})})))))};Object.defineProperty(t.prototype,"element",{get:function(){return n(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{activeItem:["activeItemHandler"],language:["watchLanguageStateHandler"],items:["processItems"],value:["processValue"]}},enumerable:false,configurable:true});return t}());w.style=y}}}));