var __awaiter=this&&this.__awaiter||function(e,t,n,u){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function r(e){try{l(u.next(e))}catch(t){i(t)}}function s(e){try{l(u["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):a(e.value).then(r,s)}l((u=u.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},u,a,i,r;return r={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(s){if(u)throw new TypeError("Generator is already executing.");while(r&&(r=0,s[0]&&(n=0)),n)try{if(u=1,a&&(i=s[0]&2?a["return"]:s[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;if(a=0,i)s=[s[0]&2,i.value];switch(s[0]){case 0:case 1:i=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;a=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){n.label=s[1];break}if(s[0]===6&&n.label<i[1]){n.label=i[1];i=s;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(s);break}if(i[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(l){s=[6,l];a=0}finally{u=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};
/*!
 * Built with Duet Design System
 */import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-b45ea754.js";import{i as inheritGlobalTheme}from"./themeable-component-cb76be7c.js";import{c as createID}from"./create-id-981107da.js";import{a as isArrowRightKey,b as isArrowUpKey,c as isArrowDownKey,d as isArrowLeftKey,e as isBackspaceKey}from"./keyboard-utils-d237bd5a.js";import{g as getLanguage,b as getLocale,a as getLocaleString}from"./language-utils-6be16ff0.js";import"./string-utils-5954f458.js";var actionAdd={title:"action-add",tags:"action add plus",svg:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M12 24a.75.75 0 0 1-.75-.75v-10.5H.75a.75.75 0 0 1 0-1.5h10.5V.75a.75.75 0 0 1 1.5 0v10.5h10.5a.75.75 0 0 1 0 1.5h-10.5v10.5A.75.75 0 0 1 12 24z"/></svg>'};var actionSubtract={title:"action-subtract",tags:"action subtract minus remove delete cancel",svg:'<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img"><path d="M.75 12.788a.75.75 0 0 1 0-1.5h22.5a.75.75 0 0 1 0 1.5z"/></svg>'};function SafeParseFloat(e,t){var n;if(typeof e==="string"){var u=e.replace("−","-").replace("‐","-").replace("−","-").replace("–","-").replace("—","-");if(t){u=ConvertToEnUS(u,t,false)}u=u.replace(/\s+/g,"");u=u.replace(/(?!^-?\d*\.{0,1}\d+$)/g,"");n=parseFloat(u)}if(typeof e==="number"){n=parseFloat(String(e))}if(!isNaN(Number(n))){return Number(n)}if(e===null||e===undefined){return null}throw new Error("Invalid value passed to SafeParseFloat")}function ConvertToEnUS(e,t,n){if(n===void 0){n=false}var u;var a=new Intl.NumberFormat(t).format(1/2).replace(/[0-9]/g,"");var i=new Intl.NumberFormat("en-US").format(1/2).replace(/[0-9]/g,"");var r=new Intl.NumberFormat(t).format(1e3).replace(/[0-9]/g,"");var s=new Intl.NumberFormat("en-US").format(1e3).replace(/[0-9]/g,"");u=e.replace(a,"DECIMALSEPARATOR");if(n){u=u.replace(r,"THOUSANDSEPARATOR")}else{u=u.replace(r,"")}u=u.replace("DECIMALSEPARATOR",i);u=u.replace("THOUSANDSEPARATOR",s);return u}var roundTo=function(e,t){return Math.round(e/t)*t};var clamp=function(e,t,n){return Math.min(Math.max(e,t),n)};var duetNumberInputCss='*.sc-duet-number-input,*.sc-duet-number-input::after,*.sc-duet-number-input::before{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none}.sc-duet-number-input-h{box-sizing:border-box;padding:0;margin:0;background:transparent;border:0;-moz-appearance:none;-webkit-appearance:none;appearance:none;margin-right:16px !important;margin-bottom:12px !important;display:inline-flex;width:100%;min-width:calc(33.333% - 8px);max-width:100%;line-height:1.25;text-align:left;vertical-align:bottom}.sc-duet-number-input-h:last-child,.sc-duet-number-input-h:last-of-type{margin-right:0 !important}@media (min-width: 36em){.sc-duet-number-input-h{width:calc(50% - 16px - 3px)}}.duet-expand.sc-duet-number-input-h{width:100% !important}.duet-m-0.sc-duet-number-input-h{margin:0 !important}.duet-number-container.sc-duet-number-input{position:relative;width:100%}.duet-number-buttons.sc-duet-number-input{-webkit-user-select:none;user-select:none;position:absolute;top:1px;right:1px;z-index:200;width:96px;height:calc(100% - 2px)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input{position:relative;display:inline-flex;align-items:center;justify-content:center;width:50%;height:100%;text-align:center;cursor:pointer;background:transparent;-webkit-appearance:none;appearance:none}.duet-number-buttons.sc-duet-number-input .duet-number-button[aria-disabled=true].sc-duet-number-input,.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:disabled{pointer-events:none}.duet-number-buttons.sc-duet-number-input .duet-number-button[aria-disabled=true].sc-duet-number-input duet-icon.sc-duet-number-input,.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:disabled duet-icon.sc-duet-number-input{opacity:0.4}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:active duet-icon.sc-duet-number-input{transform:translateY(1px)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{outline:0}.user-is-tabbing.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{z-index:2;box-shadow:0 0 0 2px rgb(0, 119, 179)}.duet-theme-turva .user-is-tabbing.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:focus{box-shadow:0 0 0 2px rgb(23, 28, 58)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type{border-left:1px solid rgb(207, 210, 212)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type::before{position:absolute;top:0;left:-6px;width:6px;height:100%;content:"";background:linear-gradient(to left, rgba(207, 210, 212, 0.2) 0%, rgba(207, 210, 212, 0.2) 1px, rgba(207, 210, 212, 0.1) 1px, rgba(207, 210, 212, 0) 100%)}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type{border-top-right-radius:4px;border-bottom-right-radius:4px}.duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type::before{position:absolute;top:20%;left:0;width:1px;height:60%;content:"";background:rgb(225, 227, 230)}.duet-theme-turva.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:first-of-type::before{background:linear-gradient(to left, rgba(207, 207, 209, 0.2) 0%, rgba(207, 207, 209, 0.2) 1px, rgba(207, 207, 209, 0.1) 1px, rgba(207, 207, 209, 0) 100%)}.duet-theme-turva.sc-duet-number-input-h .duet-number-buttons.sc-duet-number-input .duet-number-button.sc-duet-number-input:last-of-type::before{background:rgb(228, 228, 230)}';var DuetNumberInput=function(){function e(e){var t=this;registerInstance(this,e);this.duetChange=createEvent(this,"duetChange",3);this.duetInput=createEvent(this,"duetInput",3);this.duetBlur=createEvent(this,"duetBlur",7);this.duetFocus=createEvent(this,"duetFocus",7);this.inputId=createID("DuetInput");this.handleFocus=function(){t.focusedValue=t.value};this.handleKeyDown=function(e){if(isArrowRightKey(e)||isArrowUpKey(e)){t.add(e)}else if(isArrowDownKey(e)||isArrowLeftKey(e)){t.subtract(e)}else if(isBackspaceKey(e)){t.clearValue()}};this.handleChange=function(e){var n=e.target;if(n&&n.value){try{var u=SafeParseFloat(n.value,t.locale);if(isNaN(u)||u==null){u=t.min||0}t.setValue(u);t.duetInput.emit({component:"duet-number-input",originalEvent:e,value:SafeParseFloat(t.value,t.locale).toString(),valueAsNumber:u})}catch(a){t.duetInput.emit({component:"duet-number-input",originalEvent:e,value:null,valueAsNumber:null})}}else{t.duetInput.emit({component:"duet-number-input",originalEvent:e,value:null,valueAsNumber:null})}};this.handleBlur=function(e){var n=e.target;if(!n){return}if(n.value){try{var u=SafeParseFloat(n.value,t.locale);if(t.rounding){u=roundTo(u,t.step)}u=clamp(u,t.min,t.max);if(u!==SafeParseFloat(t.value,t.locale)||u!==SafeParseFloat(t.focusedValue,t.locale)){t.setValue(u);t.emitChange(e)}}catch(a){t.emitNull(e)}}else{t.emitNull(e)}};this.emitChange=function(e){var n=SafeParseFloat(t.value,t.locale);t.duetChange.emit({originalEvent:e,value:n.toString(),valueAsNumber:n,component:"duet-number-input"})};this.emitNull=function(e){t.duetChange.emit({originalEvent:e,value:null,valueAsNumber:null,component:"duet-number-input"})};this.localizeValue=function(e){return e.toLocaleString(t.locale)};this.setValue=function(e){t.value=t.localizeValue(e);t.duetInputElement.value="".concat(t.value," ").concat(t.unit)};this.add=function(e){if(e){e.preventDefault()}var n=SafeParseFloat(t.value,t.locale);if(n===t.max){return}var u=n==null?t.min:n+t.step;if(u%t.step!==0){var a=u%t.step;u-=a}var i=clamp(u,t.min,t.max);t.value=t.localizeValue(i);t.emitChange(e)};this.subtract=function(e){if(e){e.preventDefault()}var n=SafeParseFloat(t.value,t.locale);if(n===t.min){return}var u=n-t.step;if(u%t.step!==0){var a=t.step-u%t.step;u+=a}u=clamp(u,t.min,t.max);t.value=t.localizeValue(u);t.emitChange(e)};this.language=getLanguage();this.locale=getLocale(this.language).locale;this.unit=getLocale(this.language).money;this.focusedValue=undefined;this.accessibleActiveDescendant=undefined;this.accessibleControls=undefined;this.accessibleDetails=undefined;this.accessibleLabelledBy=undefined;this.accessibleDescription=undefined;this.accessibleOwns=undefined;this.accessibleDescribedBy=undefined;this.accessibleLiveDefaults={fi:"{current} euroa valittuna",en:"{current} euros selected",sv:"{current} euro valt"};this.accessibleLive=getLocaleString(this.accessibleLiveDefaults,this.language);this.accessibleLiveEnabled=true;this.accessibleAddDefaults={fi:"Lisää summaan",en:"Add to the amount",sv:"Lägg till beloppet"};this.accessibleAdd=getLocaleString(this.accessibleAddDefaults,this.language);this.accessibleSubtractDefaults={fi:"Vähennä summasta",en:"Subtract from the amount",sv:"Dra från beloppet"};this.accessibleSubtract=getLocaleString(this.accessibleSubtractDefaults,this.language);this.theme="";this.margin="auto";this.expand=false;this.identifier=undefined;this.min=0;this.labelDefaults={fi:"Nimilappu",en:"Label",sv:"Etikett"};this.label=getLocaleString(this.labelDefaults,this.language);this.labelHidden=false;this.max=1e6;this.name=undefined;this.error="";this.tooltip="";this.step=5e3;this.rounding=true;this.role=undefined;this.disabled=false;this.required=false;this.value=undefined}e.prototype.componentWillLoad=function(){inheritGlobalTheme(this);if(this.value){this.value=this.localizeValue(SafeParseFloat(this.value,this.locale))}};e.prototype.setFocus=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.duetInputElement.setFocus(e);return[2]}))}))};e.prototype.clearValue=function(){this.value=null;this.duetInputElement.value=""};e.prototype.formatAnnouncement=function(){var e=!!this.value?SafeParseFloat(this.value,this.locale):null;if(e==null){return""}return this.accessibleLive.replace("{current}",e.toString(10))};e.prototype.render=function(){var e=this;var t=this.identifier||this.inputId;var n="".concat(this.localizeValue(this.max)," ").concat(this.unit).length;var u=!!this.value?SafeParseFloat(this.value,this.locale):null;return h(Host,{class:{"duet-theme-turva":this.theme==="turva","duet-expand":this.expand,"duet-m-0":this.margin==="none"}},h("div",{class:"duet-number-container"},h("duet-input",{ref:function(t){return e.duetInputElement=t},onDuetChange:function(t){return e.handleChange(t)},onDuetFocus:this.handleFocus,onDuetBlur:function(t){return e.handleBlur(t)},onKeyDown:function(t){return e.handleKeyDown(t)},label:this.label,value:this.value?"".concat(this.value," ").concat(this.unit):"",error:this.error,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":u!=null?u:"",maxlength:n,name:this.name,component:"number",required:this.required,disabled:this.disabled,role:this.role,labelHidden:this.labelHidden,tooltip:this.tooltip,identifier:t,theme:this.theme,margin:"none",expand:true,numericKeyboard:true,autoComplete:"off",type:"text",accessibleActiveDescendant:this.accessibleActiveDescendant,accessibleLabelledBy:this.accessibleLabelledBy,accessibleDescription:this.accessibleDescription,accessibleDetails:this.accessibleDetails,accessibleControls:this.accessibleControls,accessibleOwns:this.accessibleOwns,accessibleDescribedBy:this.accessibleDescribedBy},h("div",{class:{"duet-number-buttons":true,"duet-no-label":this.labelHidden}},h("button",{"aria-controls":t,disabled:this.disabled,"aria-disabled":u==null||u===this.min?"true":"false",class:"duet-number-button duet-number-button-subtract",onClick:this.subtract,type:"button"},h("duet-visually-hidden",null,this.accessibleSubtract," ",this.step),h("duet-icon",{icon:actionSubtract.svg,size:"small",margin:"none",color:this.theme==="turva"?"secondary-turva":"secondary"})),h("button",{"aria-controls":t,disabled:this.disabled,"aria-disabled":u===this.max?"true":"false",class:"duet-number-button duet-number-button-add",onClick:this.add,type:"button"},h("duet-visually-hidden",null,this.accessibleAdd," ",this.step),h("duet-icon",{icon:actionAdd.svg,size:"small",margin:"none",color:this.theme==="turva"?"secondary-turva":"secondary"})))),this.accessibleLiveEnabled&&h("duet-visually-hidden",{"aria-live":"polite","aria-atomic":"true","aria-relevant":"all"},this.formatAnnouncement())))};Object.defineProperty(e.prototype,"element",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();DuetNumberInput.style=duetNumberInputCss;export{DuetNumberInput as duet_number_input};